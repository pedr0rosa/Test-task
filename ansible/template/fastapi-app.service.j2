[Unit]
Description=FastAPI Application
After=network.target

[Service]
User=ec2-user
Group=ec2-user
WorkingDirectory=/opt/fastapi-app
Environment="PATH=/usr/local/bin:/usr/bin"
#ExecStart=/usr/bin/python3.9 -m uvicorn main:app --host :: --port 80
ExecStart=/usr/bin/python3.9 -m uvicorn main:app --host 0.0.0.0 --port 80

# Security hardening
CapabilityBoundingSet=CAP_NET_BIND_SERVICE
AmbientCapabilities=CAP_NET_BIND_SERVICE
SecureBits=keep-caps
NoNewPrivileges=yes
PrivateTmp=yes
ProtectSystem=full

Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target